## Static library
> 参考：[https://blog.csdn.net/weixin_44211968/article/details/124662836](https://blog.csdn.net/weixin_44211968/article/details/124662836)

### 静态链接
静态链接就是在装载之前，就完成所有的符号引用的一种链接方式。在生成可执行文件的时候（链接阶段），把所有需要的函数的二进制代码都包含到可执行文件中去。<br />优点：在程序发布的时候就不需要依赖库，也就是不再需要带着库一块发布，程序可以独立执行。<br />缺点：

1. 浪费内存空间。在多进程的操作系统下，同一时间，内存中可能存在多个相同的公共库函数。
2. 程序的开发与发布流程受模块制约。 只要有一个模块更新，那么就需要重新编译打包整个代码。

Linux：`.a`，Windows：`.lib`。
### 动态链接
在编译的时候不直接拷贝可执行代码，而是通过记录一系列符号和参数，在程序运行或加载时将这些信息传递给操作系统，操作系统负责将需要的动态库加载到内存中，然后程序在运行到指定的代码时，去共享执行内存中已经加载的动态库可执行代码，最终达到运行时连接的目的。<br />优点：解决了静态链接的缺陷，更适应现代的大规模的软件开发。<br />缺点：

1. 结构复杂。对于静态链接来说，系统只需要加载一个文件（可执行文件）到内存即可，但是在动态链接下，系统需要映射一个主程序和多个动态链接模块，因此，相比于静态链接，动态链接使得内存的空间分布更加复杂。不同模块在内存中的装载位置一定要保证不一样。
2. 由于是运行时加载，可能会影响程序的前期执行性能。

Linux：`.so`，Windows：`.dll`。
### 创建静态库
静态库由`.o`文件生成。
```cpp
ar -cr libxxx.a xxx.o
```
`.a`文件的名称必须以`lib`开头，然后接上`.cpp`文件的名称。<br />`c`：创建一个静态库。<br />`r`：将目标文件添加到静态库。<br />由此，可以得到`libxxx.a`文件，并用其生成最终的可执行文件。
```cpp
g++ main.cpp libxxx.a --std=c++11

g++ main.cpp -L. -lxxx --std=c++11

g++ -c main.cpp -std=c++11
g++ main.o -L. -lxxx
```
以上三种方式均等价。<br />`-L`：指定库文件的路径。`-L.`表示当前路径。<br />`-l`：指定库文件名，编译器会自动使用`lib`前缀来替换`-l`。
